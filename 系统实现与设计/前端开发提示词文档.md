# 户外徒步活动管理系统 - 前端开发提示词文档

> 使用说明：按阶段顺序使用以下提示词，每个提示词复制后发送给AI即可。
> 注意：部分提示词需要补充具体内容（用 `[待补充]` 标记）。

---

## 📋 使用前必读

### 一、如何引用后端代码

前端开发时，**强烈建议**引用后端代码，让AI理解接口格式和数据结构：

**1. 引用后端Entity（了解数据结构）：**
```
请参考后端Entity定义：
@后端项目路径/src/main/java/com/hiking/entity/Activity.java
@后端项目路径/src/main/java/com/hiking/entity/User.java
```

**2. 引用后端Controller（了解接口路径和参数）：**
```
请参考后端Controller接口定义：
@后端项目路径/src/main/java/com/hiking/controller/ActivityController.java
```

**3. 引用后端DTO/VO（了解请求/响应格式）：**
```
请参考后端DTO定义：
@后端项目路径/src/main/java/com/hiking/dto/ActivityCreateDTO.java
@后端项目路径/src/main/java/com/hiking/vo/ActivityVO.java
```

**4. 引用统一响应格式：**
```
请参考后端统一响应格式：
@后端项目路径/src/main/java/com/hiking/common/Result.java
```

### 二、推荐的开发顺序

1. **先完成后端开发**：确保API接口可用
2. **使用Swagger测试接口**：访问 http://localhost:8080/doc.html 查看接口文档
3. **再开发对应前端页面**：引用后端代码确保类型匹配

### 三、依赖版本说明

为避免兼容性问题，推荐使用以下版本：

```json
{
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.21.0",
    "antd": "^5.12.0",
    "axios": "^1.6.2",
    "@ant-design/icons": "^5.2.6",
    "dayjs": "^1.11.10"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.2.1",
    "vite": "^5.0.8"
  }
}
```

---

## 阶段一：项目初始化

### 1.1 创建React项目

```
我正在开发一个"基于SpringBoot的户外徒步活动管理系统"的前端部分。

请帮我创建React项目。

技术栈要求（来自系统架构设计文档）：
- React 18.2.x
- Vite 5.0.x（构建工具）
- Ant Design 5.12.x（UI组件库）
- React Router 6.21.x（路由）
- Axios 1.6.x（HTTP请求）
- 高德地图 JS API 2.0（地图服务）

请提供：
1. 创建项目的命令
2. 安装依赖的命令（使用指定版本）
3. vite.config.js 配置（包含代理配置，代理到 http://localhost:8080）
4. 项目基本目录结构

安装命令参考：
npm create vite@latest hiking-frontend -- --template react
cd hiking-frontend
npm install react-router-dom@^6.21.0 antd@^5.12.0 axios@^1.6.2 @ant-design/icons@^5.2.6 dayjs@^1.11.10
```

---

### 1.2 创建目录结构

```
请创建前端项目的目录结构。

目录结构（来自系统架构设计文档）：
src/
├── api/                        # API请求模块
│   ├── request.js              # Axios封装
│   ├── user.js                 # 用户相关API
│   ├── activity.js             # 活动相关API
│   └── ...
├── assets/                     # 静态资源
│   ├── images/
│   └── styles/
├── components/                 # 公共组件
│   ├── common/                 # 通用组件
│   ├── business/               # 业务组件
│   └── layout/                 # 布局组件
├── pages/                      # 页面组件
│   ├── user/
│   ├── activity/
│   ├── checkin/
│   └── admin/
├── router/                     # 路由配置
├── utils/                      # 工具函数
├── hooks/                      # 自定义Hooks
├── App.jsx
├── main.jsx
└── index.css

请为每个目录创建占位文件或index.js。
```

---

## 阶段二：公共模块开发

### 2.1 Axios封装

```
请封装Axios请求模块。

要求：
1. 基础配置：
   - baseURL: '/api'（通过Vite代理转发）
   - timeout: 10000
2. 请求拦截器：
   - 从localStorage获取token
   - 添加Authorization头：Bearer {token}
3. 响应拦截器：
   - 统一处理响应（后端返回格式：{code, message, data}）
   - code === 200 返回 data
   - code === 401 跳转登录页，清除token
   - 其他错误 message.error 提示
4. 导出 get, post, put, delete 方法

请生成：
1. src/api/request.js
```

---

### 2.2 存储工具

```
请封装localStorage存储工具。

要求：
1. 封装 token 的存取删
2. 封装用户信息的存取删
3. 通用的 get/set/remove 方法
4. 支持JSON序列化

请生成：
1. src/utils/storage.js

导出方法：
- getToken() / setToken(token) / removeToken()
- getUser() / setUser(user) / removeUser()
- get(key) / set(key, value) / remove(key)
```

---

### 2.3 路由配置

```
请配置React Router路由。

路由规划（来自页面清单设计）：

公共路由（无需登录）：
- / 首页
- /login 登录
- /register 注册
- /activities 活动列表
- /activities/:id 活动详情

需要登录的路由：
- /user/profile 个人中心
- /user/registrations 我的报名
- /user/messages 我的消息
- /activities/:id/checkin 活动签到
- /activities/:id/gathering 集合信息
- /activities/:id/review 活动评价

组织者路由：
- /organizer/activities 我发布的活动
- /organizer/activity/create 发布活动
- /organizer/activity/:id 活动管理
- /organizer/activity/:id/registrations 报名审核

管理员路由：
- /admin 管理后台
- /admin/activities/audit 活动审核
- /admin/users 用户管理

要求：
1. 使用React Router 6的createBrowserRouter
2. 路由守卫：检查登录状态
3. 不同布局：空白布局（登录注册）、主布局、管理布局

请生成：
1. src/router/index.jsx
2. src/components/layout/MainLayout.jsx（主布局骨架）
3. src/components/layout/AdminLayout.jsx（管理布局骨架）
4. src/components/AuthRoute.jsx（路由守卫组件）
```

---

### 2.4 主布局组件

```
请实现主布局组件（用于前台页面）。

布局结构：
┌─────────────────────────────────────────────────────────────┐
│  Header: Logo + 导航菜单 + 用户信息/登录按钮                   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                      内容区域 (Outlet)                       │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  Footer: 版权信息                                            │
└─────────────────────────────────────────────────────────────┘

Header导航菜单：
- 首页
- 活动列表
- 我的报名（登录后显示）
- 发布活动（组织者显示）
- 管理后台（管理员显示）

右侧用户区域：
- 未登录：登录 | 注册
- 已登录：头像 + 昵称 + 下拉菜单（个人中心、我的消息、退出）

请使用Ant Design组件（Layout, Menu, Dropdown, Avatar）。

请生成：
1. src/components/layout/MainLayout.jsx
2. src/components/layout/Header.jsx
3. src/components/layout/Footer.jsx
```

---

### 2.5 管理后台布局

```
请实现管理后台布局组件。

布局结构：
┌──────────────┬──────────────────────────────────────────────┐
│              │  顶部栏：面包屑 + 用户信息                     │
│   侧边栏     ├──────────────────────────────────────────────┤
│   菜单       │                                              │
│              │                内容区域 (Outlet)              │
│              │                                              │
│              │                                              │
└──────────────┴──────────────────────────────────────────────┘

侧边栏菜单：
- 📊 首页 /admin
- 📋 活动审核 /admin/activities/audit
- 📝 活动管理 /admin/activities
- 👥 用户管理 /admin/users
- 🚨 预警事件 /admin/alerts
- 📈 数据统计 /admin/statistics
- ⚙️ 字典管理 /admin/dict

请使用Ant Design的Layout.Sider + Menu。

请生成：
1. src/components/layout/AdminLayout.jsx
```

---

### 2.6 自定义Hooks

```
请创建常用的自定义Hooks。

1. useAuth - 认证相关
   - user: 当前用户信息
   - isLogin: 是否已登录
   - isOrganizer: 是否是组织者
   - isAdmin: 是否是管理员
   - login(data): 登录方法
   - logout(): 退出方法

2. useLocation - 地理位置相关（用于签到）
   - position: 当前位置 {latitude, longitude}
   - loading: 是否正在获取
   - error: 错误信息
   - getLocation(): 获取位置

请生成：
1. src/hooks/useAuth.js
2. src/hooks/useLocation.js
```

---

## 阶段三：API模块开发

> 💡 **重要提示**：开发API模块时，请引用后端Controller代码，确保接口路径和参数完全一致！

### 3.1 用户API

```
请创建用户相关的API模块。

【请先引用后端代码】：
@后端项目路径/src/main/java/com/hiking/controller/AuthController.java
@后端项目路径/src/main/java/com/hiking/controller/UserController.java
@后端项目路径/src/main/java/com/hiking/dto/LoginDTO.java
@后端项目路径/src/main/java/com/hiking/dto/RegisterDTO.java

根据后端接口定义，创建前端API模块。

接口列表（参考后端Controller）：
1. POST /api/auth/register - 用户注册
2. POST /api/auth/login - 用户登录
3. GET /api/user/info - 获取当前用户信息
4. PUT /api/user/profile - 更新用户档案
5. GET /api/user/profile - 获取用户档案

请生成：
1. src/api/user.js

导出方法：
- register(data)
- login(data)
- getUserInfo()
- updateProfile(data)
- getProfile()
```

---

### 3.2 活动API

```
请创建活动相关的API模块。

【请先引用后端代码】：
@后端项目路径/src/main/java/com/hiking/controller/ActivityController.java
@后端项目路径/src/main/java/com/hiking/entity/Activity.java
@后端项目路径/src/main/java/com/hiking/dto/ActivityCreateDTO.java
@后端项目路径/src/main/java/com/hiking/vo/ActivityVO.java

根据后端接口定义，创建前端API模块。

接口列表（参考后端Controller）：
1. GET /api/activities - 活动列表（支持查询参数）
2. GET /api/activities/:id - 活动详情
3. POST /api/activities - 发布活动
4. PUT /api/activities/:id - 更新活动
5. PUT /api/activities/:id/submit - 提交审核
6. PUT /api/activities/:id/audit - 审核活动
7. GET /api/user/activities - 我发布的活动
8. GET /api/activities/:id/gathering-plan - 获取集合方案
9. GET /api/activities/:id/reviews - 获取评价列表

请生成：
1. src/api/activity.js
```

---

### 3.3 报名API

```
请创建报名相关的API模块。

【请先引用后端代码】：
@后端项目路径/src/main/java/com/hiking/controller/RegistrationController.java
@后端项目路径/src/main/java/com/hiking/entity/Registration.java

根据后端接口定义，创建前端API模块。

接口列表（参考后端Controller）：
1. POST /api/registrations - 提交报名
2. PUT /api/registrations/:id/audit - 审核报名
3. PUT /api/registrations/:id/cancel - 取消报名
4. GET /api/activities/:activityId/registrations - 活动报名列表
5. GET /api/user/registrations - 我的报名列表

请生成：
1. src/api/registration.js
```

---

### 3.4 签到API

```
请创建签到相关的API模块。

【请先引用后端代码】：
@后端项目路径/src/main/java/com/hiking/controller/CheckinController.java
@后端项目路径/src/main/java/com/hiking/entity/CheckinRecord.java
@后端项目路径/src/main/java/com/hiking/entity/Checkpoint.java
@后端项目路径/src/main/java/com/hiking/dto/CheckinDTO.java

根据后端接口定义，创建前端API模块。

接口列表（参考后端Controller）：
1. POST /api/checkin - GPS签到
2. GET /api/activities/:activityId/checkin-status - 签到状态
3. GET /api/activities/:activityId/checkpoints - 签到点列表
4. POST /api/track/report - 轨迹上报

请生成：
1. src/api/checkin.js
```

---

### 3.5 其他API

```
请创建其他模块的API。

【请先引用后端代码】：
@后端项目路径/src/main/java/com/hiking/controller/MessageController.java
@后端项目路径/src/main/java/com/hiking/controller/DictController.java
@后端项目路径/src/main/java/com/hiking/controller/AdminController.java
@后端项目路径/src/main/java/com/hiking/entity/Message.java
@后端项目路径/src/main/java/com/hiking/entity/Dict.java

根据后端接口定义，创建前端API模块。

消息API（src/api/message.js）：
- GET /api/user/messages
- PUT /api/messages/:id/read
- GET /api/user/messages/unread-count

字典API（src/api/dict.js）：
- GET /api/dict/data/:dictCode

管理API（src/api/admin.js）：
- GET /api/admin/dashboard
- GET /api/admin/users
- PUT /api/admin/users/:id/status
- GET /api/admin/activities/audit（待审核活动）
- PUT /api/activities/:id/audit

请生成以上API模块。
```

---

## 阶段四：公共页面开发

> 💡 **提示**：开发页面前，请确保对应的后端接口已完成并测试通过！

### 4.1 登录页面

```
请实现登录页面。

【请先引用后端代码】：
@后端项目路径/src/main/java/com/hiking/controller/AuthController.java
@后端项目路径/src/main/java/com/hiking/dto/LoginDTO.java
@后端项目路径/src/main/java/com/hiking/vo/LoginVO.java

页面路径：/login
页面布局（来自页面清单设计）：
- 居中的登录卡片
- 系统Logo + 标题
- 用户名输入框
- 密码输入框
- 登录按钮
- "没有账号？去注册" 链接

功能：
1. 表单校验（用户名、密码必填）
2. 调用登录API（参考后端LoginDTO）
3. 登录成功：存储token和用户信息（参考后端LoginVO），跳转首页
4. 登录失败：显示错误提示

使用Ant Design组件：Card, Form, Input, Button

请生成：
1. src/pages/user/Login/index.jsx
2. src/pages/user/Login/index.css（可选）
```

---

### 4.2 注册页面

```
请实现注册页面。

页面路径：/register
页面元素：
- 用户名输入框（必填，4-20字符）
- 密码输入框（必填，6-20字符）
- 确认密码（必填，与密码一致）
- 手机号（选填）
- 邮箱（选填）
- 注册按钮
- "已有账号？去登录" 链接

功能：
1. 表单校验
2. 密码一致性校验
3. 调用注册API
4. 注册成功：提示成功，跳转登录页
5. 注册失败：显示错误（如用户名已存在）

请生成：
1. src/pages/user/Register/index.jsx
```

---

### 4.3 首页

```
请实现首页。

页面路径：/
页面元素（来自页面清单设计）：
- 顶部轮播图/Banner
- 热门活动推荐（卡片列表，取最新4-6个）
- 快速入口（按难度分类）
- 系统简介

功能：
1. 获取热门活动列表
2. 点击活动卡片跳转详情页
3. 点击"查看更多"跳转活动列表页

使用Ant Design组件：Carousel, Card, Row, Col

请生成：
1. src/pages/Home/index.jsx
```

---

### 4.4 活动列表页

```
请实现活动列表页。

页面路径：/activities
页面布局（来自页面清单设计）：
┌─────────────────────────────────────────────────────────────┐
│  筛选区域                                                    │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ 难度等级 │ │ 活动地区 │ │ 活动时间 │ │ 费用范围 │  [搜索]  │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
├─────────────────────────────────────────────────────────────┤
│  活动列表（卡片形式，每行2-3个）                              │
│  - 封面图                                                   │
│  - 活动标题                                                 │
│  - 日期、地点                                               │
│  - 难度、人数                                               │
│  - 费用                                                     │
├─────────────────────────────────────────────────────────────┤
│  分页                                                       │
└─────────────────────────────────────────────────────────────┘

功能：
1. 条件筛选（难度从字典获取）
2. 关键词搜索
3. 分页查询
4. 点击卡片跳转详情

使用Ant Design组件：Select, Input.Search, Card, Pagination, Row, Col, Tag

请生成：
1. src/pages/activity/List/index.jsx
2. src/components/business/ActivityCard/index.jsx（活动卡片组件，可复用）
```

---

### 4.5 活动详情页

```
请实现活动详情页。

【请先引用后端代码】：
@后端项目路径/src/main/java/com/hiking/controller/ActivityController.java
@后端项目路径/src/main/java/com/hiking/vo/ActivityDetailVO.java
@后端项目路径/src/main/java/com/hiking/entity/Activity.java
@后端项目路径/src/main/java/com/hiking/entity/Route.java

页面路径：/activities/:id
页面布局（来自页面清单设计）：
- 活动封面大图
- 活动标题
- 基本信息标签（日期、难度、人数）
- Tab切换：活动详情 | 路线信息 | 评价
- 底部固定操作栏：组织者信息 + 收藏 + 报名按钮

功能：
1. 获取活动详情（参考后端ActivityDetailVO）
2. Tab切换内容
3. 路线信息Tab展示地图（高德地图）
4. 评价Tab展示评价列表
5. 报名按钮：
   - 未登录：跳转登录
   - 已报名：显示"已报名"
   - 可报名：弹出报名确认弹窗
   - 已截止/满员：禁用按钮

使用Ant Design组件：Image, Tabs, Descriptions, List, Button, Modal, Tag

请生成：
1. src/pages/activity/Detail/index.jsx
```

---

## 阶段五：用户中心页面

### 5.1 个人中心页面

```
请实现个人中心页面。

页面路径：/user/profile
页面元素：
- 用户头像
- 基本信息展示（用户名、昵称、手机、邮箱）
- 编辑按钮 -> 跳转编辑页

请生成：
1. src/pages/user/Profile/index.jsx
```

---

### 5.2 编辑资料页面

```
请实现编辑资料页面。

页面路径：/user/profile/edit
页面元素：
- 头像上传
- 昵称
- 真实姓名
- 性别（下拉选择）
- 出生日期（日期选择）
- 徒步经验等级（下拉选择）
- 健康状况
- 紧急联系人
- 紧急联系电话
- 个人简介

功能：
1. 获取当前用户档案
2. 表单填充现有数据
3. 提交更新

请生成：
1. src/pages/user/ProfileEdit/index.jsx
```

---

### 5.3 我的报名页面

```
请实现我的报名页面。

页面路径：/user/registrations
页面元素：
- Tab切换：全部 | 待审核 | 已通过 | 已拒绝 | 已取消
- 报名记录列表：
  - 活动封面缩略图
  - 活动标题
  - 活动日期
  - 报名状态（标签）
  - 操作按钮（取消报名/查看详情）

功能：
1. 获取我的报名列表
2. 按状态筛选
3. 取消报名（确认弹窗）
4. 点击活动跳转详情

请生成：
1. src/pages/user/Registrations/index.jsx
```

---

### 5.4 我的消息页面

```
请实现我的消息页面。

页面路径：/user/messages
页面元素：
- 消息列表
  - 消息标题
  - 消息内容预览
  - 时间
  - 已读/未读状态
- 全部标记已读按钮

功能：
1. 获取消息列表
2. 点击消息标记已读并展开详情
3. 批量标记已读

请生成：
1. src/pages/user/Messages/index.jsx
```

---

## 阶段六：签到页面开发

> 🔔 **核心功能提醒**：签到是系统的核心功能，涉及GPS定位和后端位置校验，请仔细对照后端实现！

### 6.1 活动签到页面（核心页面）

```
请实现活动签到页面。

【请先引用后端代码 - 重要！】：
@后端项目路径/src/main/java/com/hiking/controller/CheckinController.java
@后端项目路径/src/main/java/com/hiking/dto/CheckinDTO.java
@后端项目路径/src/main/java/com/hiking/entity/Checkpoint.java
@后端项目路径/src/main/java/com/hiking/entity/CheckinRecord.java
@后端项目路径/src/main/java/com/hiking/service/impl/CheckinServiceImpl.java（了解距离校验逻辑）

页面路径：/activities/:id/checkin
页面布局（来自页面清单设计）：
┌─────────────────────────────────────────────────────────────┐
│  顶部导航栏                              活动名称            │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────┐   │
│  │                    高德地图                           │   │
│  │              （显示当前位置 + 签到点）                  │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  签到进度：2/4  ═══════════░░░░░░░░░░                       │
│                                                             │
│  签到点列表：                                                │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ ✅ 1. 集合点      已签到 08:15                        │   │
│  │ ✅ 2. 山腰休息站   已签到 10:30                        │   │
│  │ ⭕ 3. 山顶观景台   [点击签到]                          │   │
│  │ ⏳ 4. 终点         待签到                              │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│             当前位置：距离下一签到点 150m                     │
│                    [📍 立即签到]                            │
└─────────────────────────────────────────────────────────────┘

功能：
1. 获取签到点列表和签到状态
2. 显示高德地图：
   - 显示当前位置（蓝点）
   - 显示签到点（标记点）
   - 显示路线轨迹（可选）
3. 定时获取当前GPS位置（使用useLocation hook）
4. 计算当前位置到下一个签到点的距离
5. 签到按钮：
   - 调用签到API（传入当前经纬度，参考CheckinDTO）
   - 成功：刷新签到状态
   - 失败（不在范围内）：提示错误

技术要点（来自功能模块设计文档-签到技术说明）：
- 使用高德地图 AMap.Geolocation 插件获取位置
- 前端获取经纬度后发送给后端校验
- 后端使用Haversine公式计算距离（约100-200米范围内）
- 后端返回签到成功/不在范围内

签到请求格式（参考后端CheckinDTO）：
{
  "checkpointId": 1,        // 签到点ID
  "latitude": 39.9042,      // 当前纬度
  "longitude": 116.4074     // 当前经度
}

请生成：
1. src/pages/checkin/CheckIn/index.jsx
2. src/utils/map.js（高德地图工具封装）
```

---

### 6.2 高德地图封装

```
请封装高德地图工具。

要求：
1. 加载高德地图JS API（需要申请key）
2. 封装地图初始化方法
3. 封装定位插件调用
4. 封装添加标记点方法
5. 封装画路线方法

配置：
- 高德地图key：[需要用户申请]
- 插件：AMap.Geolocation, AMap.Marker, AMap.Polyline

请生成：
1. src/utils/map.js

导出方法：
- initMap(containerId, options) - 初始化地图
- getCurrentPosition() - 获取当前位置（返回Promise）
- addMarker(map, position, options) - 添加标记点
- addPolyline(map, path, options) - 添加路线
```

---

## 阶段七：组织者页面开发

> 💡 **提示**：组织者页面涉及活动创建、报名审核等复杂功能，请仔细引用后端代码！

### 7.1 发布活动页面

```
请实现发布活动页面（多步骤表单）。

【请先引用后端代码】：
@后端项目路径/src/main/java/com/hiking/controller/ActivityController.java
@后端项目路径/src/main/java/com/hiking/dto/ActivityCreateDTO.java
@后端项目路径/src/main/java/com/hiking/entity/Activity.java
@后端项目路径/src/main/java/com/hiking/entity/Route.java
@后端项目路径/src/main/java/com/hiking/controller/RouteController.java

页面路径：/organizer/activity/create
页面布局（来自页面清单设计）：
步骤条：[1.基本信息] → [2.路线选择] → [3.报名设置] → [4.预览提交]

步骤1 - 基本信息（对应ActivityCreateDTO字段）：
- 活动标题 (title)
- 活动封面（图片上传）(coverImage)
- 活动日期 (activityDate)
- 开始时间 (startTime)
- 预计时长 (duration)
- 难度等级 (difficultyLevel)
- 活动描述 (description)
- 费用说明 (fee)
- 装备要求 (equipmentRequirements)

步骤2 - 路线选择：
- 选择已有路线 / 创建新路线 (routeId)
- 显示路线信息和地图预览

步骤3 - 报名设置：
- 人数上限 (maxParticipants)
- 报名截止时间 (registrationDeadline)
- 体能要求 (fitnessRequirement)
- 经验要求 (experienceRequirement)
- 年龄限制 (ageLimit)

步骤4 - 预览提交：
- 展示所有填写的信息
- 保存草稿（status=0）/ 提交审核（status=1）

使用Ant Design组件：Steps, Form, Upload, DatePicker, TimePicker, Select, InputNumber

请生成：
1. src/pages/organizer/ActivityCreate/index.jsx
2. 或分步骤组件：Step1.jsx, Step2.jsx, Step3.jsx, Step4.jsx
```

---

### 7.2 我发布的活动页面

```
请实现"我发布的活动"页面。

页面路径：/organizer/activities
页面元素：
- Tab切换：全部 | 草稿 | 待审核 | 已发布 | 已驳回
- 活动列表（表格形式）：
  - 活动标题
  - 活动日期
  - 报名人数
  - 状态（标签）
  - 操作：编辑 | 报名管理 | 签到监控 | 删除

功能：
1. 获取我发布的活动
2. 按状态筛选
3. 跳转操作页面

请生成：
1. src/pages/organizer/Activities/index.jsx
```

---

### 7.3 报名审核页面

```
请实现报名审核页面。

页面路径：/organizer/activity/:id/registrations
页面元素：
- 活动信息卡片（标题、日期、报名情况）
- Tab切换：待审核 | 已通过 | 已拒绝
- 报名列表（表格）：
  - 用户头像
  - 用户名/昵称
  - 报名时间
  - 备注
  - 操作：通过 | 拒绝

功能：
1. 获取活动报名列表
2. 审核操作（确认弹窗，拒绝需填写原因）
3. 批量审核（可选）

请生成：
1. src/pages/organizer/RegistrationAudit/index.jsx
```

---

### 7.4 签到监控页面

```
请实现签到监控页面。

页面路径：/organizer/activity/:id/monitor
页面元素：
- 活动信息卡片
- 地图区域：显示所有参与者当前位置
- 参与者列表：
  - 头像、用户名
  - 签到进度（如 2/4）
  - 最后位置更新时间
  - 状态：正常 / 偏离 / 失联
- 预警列表（右侧或弹窗）

功能：
1. 获取所有参与者签到状态
2. 地图上显示参与者位置（不同颜色标记状态）
3. 轮询刷新（每30秒）
4. 预警列表和处理

请生成：
1. src/pages/organizer/Monitor/index.jsx
```

---

## 阶段八：管理后台页面

> 💡 **提示**：管理后台需要管理员权限，请确保路由守卫检查用户角色！

### 8.1 后台首页（Dashboard）

```
请实现管理后台首页。

【请先引用后端代码】：
@后端项目路径/src/main/java/com/hiking/controller/AdminController.java
@后端项目路径/src/main/java/com/hiking/vo/DashboardVO.java

页面路径：/admin
页面元素（来自页面清单设计）：
- 统计卡片：用户数、活动数、今日报名数、待审核数
- 近期活动表格
- 待处理预警列表

功能：
1. 调用Dashboard API获取统计数据（参考DashboardVO）
2. 卡片展示数字
3. 表格展示近期活动

使用Ant Design组件：Card, Statistic, Table

请生成：
1. src/pages/admin/Dashboard/index.jsx
```

---

### 8.2 活动审核页面

```
请实现活动审核页面。

页面路径：/admin/activities/audit
页面元素：
- 待审核活动列表（表格）：
  - 活动标题
  - 组织者
  - 活动日期
  - 提交时间
  - 操作：查看详情 | 通过 | 驳回

功能：
1. 获取待审核活动列表
2. 查看详情弹窗
3. 通过审核
4. 驳回（需填写原因）

请生成：
1. src/pages/admin/ActivityAudit/index.jsx
```

---

### 8.3 用户管理页面

```
请实现用户管理页面。

【请先引用后端代码】：
@后端项目路径/src/main/java/com/hiking/controller/AdminController.java
@后端项目路径/src/main/java/com/hiking/entity/User.java
@后端项目路径/src/main/java/com/hiking/vo/UserVO.java

页面路径：/admin/users
页面元素：
- 搜索框
- 用户列表（表格）：
  - 头像 (avatar)
  - 用户名 (username)
  - 昵称 (nickname)
  - 手机号 (phone)
  - 角色 (role: 0-普通用户, 1-组织者, 2-管理员)
  - 状态 (status: 0-正常, 1-禁用)
  - 注册时间 (createTime)
  - 操作：禁用/启用

功能：
1. 分页查询用户
2. 关键词搜索
3. 禁用/启用用户

请生成：
1. src/pages/admin/Users/index.jsx
```

---

## 阶段九：集合与评价页面

### 9.1 集合信息页面

```
请实现集合信息页面。

页面路径：/activities/:id/gathering
页面元素：
- 集合时间
- 集合地点（地址 + 地图）
- 交通指引
- 携带物品清单
- 注意事项
- 组织者联系方式

使用Ant Design组件：Descriptions, Card, Timeline

请生成：
1. src/pages/activity/Gathering/index.jsx
```

---

### 9.2 活动评价页面

```
请实现活动评价页面。

页面路径：/activities/:id/review
页面元素：
- 评分表单：
  - 整体评分（星星）
  - 路线评分
  - 组织评分
  - 安全评分
  - 评价内容
  - 图片上传（可选）
  - 是否匿名
- 提交按钮

功能：
1. 校验是否有资格评价（参与过且已结束）
2. 提交评价

使用Ant Design组件：Rate, Input.TextArea, Upload, Switch

请生成：
1. src/pages/activity/Review/index.jsx
```

---

## 阶段十：组织者-集合方案管理

### 10.1 集合方案管理页面

```
请实现集合方案管理页面。

页面路径：/organizer/activity/:id/gathering
页面元素：
- 表单：
  - 集合时间（日期时间选择）
  - 集合地址
  - 地图选点（获取经纬度）
  - 交通指引
  - 携带物品
  - 注意事项
  - 组织者电话
- 保存按钮
- 发布按钮（发布后通知参与者）

功能：
1. 获取已有集合方案（如有）
2. 保存/更新方案
3. 发布方案

请生成：
1. src/pages/organizer/GatheringPlan/index.jsx
```

---

## 附录A：常用问题处理

### A1. 页面样式调整

```
请调整[页面名称]页面的样式。

当前问题：
[描述样式问题]

期望效果：
[描述期望效果]

请更新CSS或组件样式。
```

---

### A2. 添加新组件

```
请创建一个[组件名称]组件。

用途：[描述用途]

属性：
- prop1: 类型, 说明
- prop2: 类型, 说明

示例用法：
<ComponentName prop1={value1} prop2={value2} />

请生成组件代码。
```

---

### A3. 页面功能修复

```
[页面名称]页面存在问题：

问题描述：
[描述问题]

相关代码：
[粘贴相关代码]

期望行为：
[描述期望行为]

请帮我修复。
```

---

### A4. 高德地图问题

```
高德地图相关问题：

问题描述：
[描述问题，如定位不准、地图不显示等]

当前代码：
[粘贴地图相关代码]

请帮我解决。

注意：
- 高德地图key是否正确配置
- 是否使用HTTPS环境
- 是否正确加载地图插件
```

---

## 附录B：常见错误及解决方案

### B1. 跨域问题 (CORS)

**错误表现：**
```
Access to XMLHttpRequest at 'http://localhost:8080/api/xxx' from origin 'http://localhost:5173' has been blocked by CORS policy
```

**解决方案：**

1. **方案一：使用Vite代理（推荐）**

确保 `vite.config.js` 配置正确：
```javascript
export default defineConfig({
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true
      }
    }
  }
})
```

2. **方案二：后端配置CORS**

确保后端已配置CORS：
```
@后端项目路径/src/main/java/com/hiking/config/CorsConfig.java
```

---

### B2. Token失效/401错误

**错误表现：**
- 页面跳转到登录页
- 接口返回401

**解决方案：**

检查以下几点：
1. Token是否正确存储到localStorage
2. 请求拦截器是否正确添加Authorization头
3. Token是否过期（默认24小时）
4. 后端是否正常运行

---

### B3. 接口参数不匹配

**错误表现：**
```
400 Bad Request
```

**解决方案：**

```
请检查接口参数是否与后端一致。

【引用后端代码对比】：
@后端项目路径/src/main/java/com/hiking/controller/XxxController.java
@后端项目路径/src/main/java/com/hiking/dto/XxxDTO.java

请根据后端定义修正前端请求参数。
```

---

### B4. Ant Design 样式问题

**错误表现：**
- 组件样式不生效
- 样式错乱

**解决方案：**

确保在 `main.jsx` 中引入样式：
```javascript
import 'antd/dist/reset.css';
```

或使用按需加载（推荐）：
```javascript
// vite.config.js 无需额外配置，Ant Design 5.x 默认支持按需加载
```

---

### B5. 路由不生效/刷新404

**错误表现：**
- 页面刷新后404
- 路由跳转不工作

**解决方案：**

1. 确保使用 `BrowserRouter` 或 `createBrowserRouter`
2. 开发环境无需特殊配置
3. 生产环境需要服务器配置（如Nginx）：
```nginx
location / {
  try_files $uri $uri/ /index.html;
}
```

---

## 附录C：开发调试技巧

### C1. 查看后端接口文档

启动后端后访问：
- Knife4j文档：http://localhost:8080/doc.html
- Swagger UI：http://localhost:8080/swagger-ui.html

### C2. 使用浏览器开发者工具

1. **Network面板**：查看请求/响应详情
2. **Console面板**：查看错误信息
3. **Application面板**：查看localStorage中的token

### C3. React开发者工具

安装Chrome扩展：React Developer Tools
- 查看组件树
- 检查组件状态(state)和属性(props)

### C4. 接口调试

在开发页面时，可以先用以下方式测试接口：

```javascript
// 在浏览器控制台测试
const token = localStorage.getItem('token');
fetch('/api/user/info', {
  headers: { 'Authorization': 'Bearer ' + token }
}).then(r => r.json()).then(console.log);
```

---

## 附录D：与后端联调清单

开发每个页面前，确认以下事项：

| 检查项 | 说明 |
|--------|------|
| ✅ 后端服务已启动 | `http://localhost:8080` 可访问 |
| ✅ 接口已实现 | Knife4j中可以看到对应接口 |
| ✅ 接口已测试 | 使用Knife4j测试接口正常返回 |
| ✅ 已引用后端代码 | 前端API与后端Controller参数一致 |
| ✅ Token有效 | 需登录的接口确保带上有效Token |

---

## 文档版本

| 版本 | 日期 | 修改内容 |
|------|------|----------|
| v1.0 | 2024-12-23 | 初稿 |
| v1.1 | 2024-12-23 | 添加引用后端代码说明、依赖版本、常见错误解决方案 |

